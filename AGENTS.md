# AGENTS.md - Agent Documentation

## Project Overview

**reddit-kv** is project that uses Reddit as a key-value store, using a subreddit as a database, posts Ids as keys and comments as values.  The interface and features is simple CRUD, like memcached, although we are not performance concerned.

You will select the most appropraite technology to create this.  I, the human,  personally prefer Golang for it, but will be open to your technology choices.  I'm an experienced dev so you can ask me pointed questions.

This project is a reply to this [HackerNews comment](https://news.ycombinator.com/item?id=46702344) about a typo of using Reddit as a Key-Value store.  Funny as hell.  But also, it's in a thread about whether [vibe coding really works](https://news.ycombinator.com/item?id=46691243), so let's prove or disprove it.

## Documentation Map

| File | Purpose | Editable |
|------|---------|----------|
| README.md | Human-readable project overview | Yes |
| AGENTS.md | Agent instructions (this file) | Yes |
| MEMORY.md | Long-term concepts and decisions | Yes |
| PLAN.md | Implementation planning | Yes |
| PROMPTS.md | Auto-generated by hook | **READ ONLY** |
| Taskfile.yml | Build automation | Yes |

## Build System

This project uses [Task](https://taskfile.dev/) for build automation. All common operations should be done through Task.

### Quick Reference

| Task | Purpose |
|------|---------|
| `task build` | Build binary to `./bin/reddit-kv` |
| `task test` | Run all tests (verbose) |
| `task test:short` | Run tests (quiet output) |
| `task test:cover` | Run tests with coverage report |
| `task fmt` | Format all Go code |
| `task vet` | Run `go vet` |
| `task lint` | Run `golangci-lint` |
| `task tidy` | Run `go mod tidy` |
| `task clean` | Remove build artifacts |
| `task install` | Install binary to `$GOPATH/bin` |
| `task run -- <args>` | Run CLI directly (e.g., `task run -- set foo bar`) |
| `task check` | Run fmt, vet, lint, test (CI-style) |
| `task all` | Tidy, check, and build |

### Workflow

**Before committing:**
```bash
task check
```

**Quick iteration:**
```bash
task run -- set mykey "test value"
task run -- get mykey
```

**Full build:**
```bash
task all
```

## Project Structure

```
reddit-kv/
├── cmd/reddit-kv/          # CLI entry point
├── pkg/redditkv/           # Public library package
│   ├── types.go            # Core types (ValueNode, Config, Client)
│   ├── client.go           # KV client implementation
│   ├── reddit_api.go       # Reddit API interface wrapper
│   ├── mock.go             # Mock for testing
│   ├── config.go           # Config file management
│   └── client_test.go      # Unit tests
├── internal/cli/           # CLI commands (not importable)
├── bin/                    # Built binaries (gitignored)
├── Taskfile.yml            # Build automation
└── go.mod
```

